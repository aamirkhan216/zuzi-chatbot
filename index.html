<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chatbot for Zuzi ‚ù§Ô∏è</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #7b3fbf 0%, #b085f5 100%);
    margin: 0; padding: 0;
    display: flex; justify-content: center; align-items: center;
    height: 100vh;
    color: #f3e8ff;
  }
  #chat-container {
    background: rgba(60, 20, 80, 0.9);
    width: 400px;
    height: 670px;
    border-radius: 25px;
    box-shadow: 0 6px 20px rgba(183, 123, 246, 0.7);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
  }
  #chatbox {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    font-size: 17px;
    line-height: 1.5;
  }
  .message {
    margin: 10px 0;
    max-width: 70%;
    padding: 14px 20px;
    border-radius: 25px;
    line-height: 1.5;
    word-wrap: break-word;
    white-space: pre-line;
  }
  .bot-message {
    background: #9c72d6dd;
    align-self: flex-start;
    position: relative;
  }
  .user-message {
    background: #b08bebdd;
    align-self: flex-end;
    color: #2e004f;
  }
  #input-area {
    display: flex;
    border-top: 2px solid #a384d9;
    background: rgba(107, 61, 172, 0.7);
  }
  #userInput {
    flex: 1;
    padding: 16px;
    border: none;
    font-size: 17px;
    border-radius: 0 0 0 25px;
    outline: none;
    color: #2e004f;
    font-weight: 600;
  }
  #sendBtn {
    background: #7b3fbf;
    border: none;
    color: #f3e8ff;
    font-weight: bold;
    padding: 0 26px;
    cursor: pointer;
    border-radius: 0 0 25px 0;
    font-size: 17px;
    transition: background 0.3s ease;
  }
  #sendBtn:hover {
    background: #6c369e;
  }
  img.gif {
    max-width: 160px;
    border-radius: 15px;
    margin-top: 10px;
    display: block;
  }
  #music-controls {
    position: absolute;
    top: 15px;
    right: 20px;
    background: #9c72d6cc;
    border-radius: 20px;
    padding: 6px 12px;
    cursor: pointer;
    font-weight: 600;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  #music-controls span {
    font-size: 18px;
  }
  #suggestions {
    background: #7a4fd9bb;
    padding: 8px 14px;
    border-radius: 18px;
    font-size: 15px;
    margin: 10px auto 15px;
    max-width: 360px;
    text-align: center;
    user-select: none;
  }
</style>
</head>
<body>

<div id="chat-container">
  <div id="music-controls" title="Play/Pause BTS Song" aria-label="Music Controls" tabindex="0" role="button">
    <span id="music-icon">üéµ</span> <span id="music-text">Play BTS Song</span>
  </div>
  <div id="chatbox"></div>
  <div id="suggestions" aria-live="polite"></div>
  <div id="input-area">
    <input type="text" id="userInput" placeholder="Say something, ladybug..." autocomplete="off" />
    <button id="sendBtn" aria-label="Send message button">Send</button>
  </div>
</div>

<audio id="btsAudio" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_3d14683236.mp3?filename=romantic-love-song-11334.mp3"></audio>

<audio id="hugSound" src="https://actions.google.com/sounds/v1/human_voices/hug.ogg" preload="auto"></audio>
<audio id="loveSound" src="https://actions.google.com/sounds/v1/heart/heartbeat.ogg" preload="auto"></audio>

<script>
  const chatbox = document.getElementById('chatbox');
  const input = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const btsAudio = document.getElementById('btsAudio');
  const hugSound = document.getElementById('hugSound');
  const loveSound = document.getElementById('loveSound');
  const musicControls = document.getElementById('music-controls');
  const musicIcon = document.getElementById('music-icon');
  const musicText = document.getElementById('music-text');
  const suggestions = document.getElementById('suggestions');

  // Memory and conversation state
  const memory = {
    favoriteColor: 'purple',
    favoriteAnimal: 'cat',
    catName: 'Rosie',
    band: 'BTS',
    height: "6'9\"",
    favoriteHairColor: 'red',
    favoriteFeatures: ['eyes', 'lips', 'nose'],
  };

  let quizActive = false;
  let quizAsked = null;
  let userMessageCount = 0;

  // List of quiz questions
  const quizzes = [
    {
      question: "What‚Äôs my favorite hair color on you, butterfly? üòâ",
      options: ["Black", "Red", "Blonde", "Purple"],
      answer: "Red",
      success: "Correct! Red suits you like no other! üî•",
      fail: "Almost! It‚Äôs actually your gorgeous red hair, babe! ‚ù§Ô∏è"
    },
    {
      question: "What‚Äôs Rosie‚Äôs favorite thing to do? üê±",
      options: ["Sleep", "Play", "Eat", "Purr"],
      answer: "Purr",
      success: "You got it! Rosie‚Äôs purring is the sweetest sound. üêæ",
      fail: "Not quite! Rosie loves to purr the most. üòª"
    },
    {
      question: "Which BTS member would I want to dance with you to? üé§",
      options: ["RM", "Jungkook", "Jimin", "V"],
      answer: "Jungkook",
      success: "Jungkook‚Äôs moves are amazing, just like our dance memories! üíÉ",
      fail: "Close! But I think Jungkook‚Äôs the one for our dance-off. üòâ"
    }
  ];

  // Suggestions for her to ask
  const askSuggestions = [
    "Try asking me how my day was! üòä",
    "You can say 'hug' for a virtual squeeze ü§ó",
    "Ask me for a joke to lighten the mood! üòÑ",
    "Want a quiz? Just type 'quiz' or 'game' üé≤",
    "Tell me how you‚Äôre feeling today, ladybug! üíú",
    "Say 'kiss' and I'll send some love! üòò"
  ];

  // Random sweet surprises
  const surprises = [
    () => {
      typeMessage("Just a little reminder: I love you soooo much, ladybug! üíï");
      playSound(loveSound);
    },
    () => {
      typeMessage("Here‚Äôs a virtual hug, babe! ü§ó", false, () => addGif("https://media.giphy.com/media/l2QDM9Jnim1YVILXa/giphy.gif"));
      playSound(hugSound);
    },
    () => {
      typeMessage("You‚Äôre my forever butterfly. ü¶ã Can't wait to hold you again.");
      playSound(loveSound);
    },
  ];

  // Helper: typing effect for bot message
  function typeMessage(message, fromUser = false, callback = null) {
    let i = 0;
    const className = fromUser ? 'user-message' : 'bot-message';
    const msgElem = document.createElement('p');
    msgElem.className = className + ' message';
    chatbox.appendChild(msgElem);
    chatbox.scrollTop = chatbox.scrollHeight;

    function type() {
      if (i < message.length) {
        msgElem.textContent += message.charAt(i);
        i++;
        setTimeout(type, 25);
        chatbox.scrollTop = chatbox.scrollHeight;
      } else if (callback) {
        callback();
      }
    }
    type();
  }

  // Insert gif in chat
  function addGif(src) {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'gif';
    chatbox.appendChild(img);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  // Play audio helper
  function playSound(sound) {
    sound.currentTime = 0;
    sound.play();
  }

  // Pick random from array helper
  function randomFrom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // Bot asks her questions to keep chat flowing
  function botAskQuestion() {
    const questions = [
      "How was your day, my love? üíú",
      "What‚Äôs something fun you did recently, ladybug? üêû",
      "How are you feeling right now? üòä",
      "Do you remember our first meeting? It still makes me smile. ü¶ã",
      "Have you listened to BTS lately? What's your favorite song? üé∂",
      "What‚Äôs your favorite thing Rosie did today? üê±",
      "If you could pick any place for our next date, where would it be? ‚ù§Ô∏è",
      "What‚Äôs one thing you love about yourself today? üåü"
    ];
    const q = randomFrom(questions);
    typeMessage(q);
  }

  // Send quiz question
  function sendQuiz() {
    const quiz = quizzes[Math.floor(Math.random() * quizzes.length)];
    typeMessage(quiz.question, false, () => {
      quizAsked = quiz;
      quizActive = true;
    });
  }

  // Bot response logic
  function getBotResponse(text) {
    const t = text.toLowerCase();

    if(quizActive) {
      quizActive = false;
      if(t === quizAsked.answer.toLowerCase()) {
        return quizAsked.success;
      } else {
        return quizAsked.fail;
      }
    }

    // Sweet, flirty, romantic replies to general questions & keywords
    if(t.includes("miss")) {
      return randomFrom([
        "I miss you more than all the stars, my love. üåüüíñ",
        "Counting the moments until I see you again, babe. üíú",
        "Every second without you feels like forever, ladybug. üêû"
      ]);
    }
    if(t.includes("love")) {
      return randomFrom([
        "I love you to the moon and back, babe! üåô‚ù§Ô∏è",
        "My heart beats only for you, Zuzi. üíì",
        "You‚Äôre my forever and always, butterfly. ü¶ã"
      ]);
    }
    if(t.includes("hello") || t.includes("hi")) {
      return randomFrom([
        "Hey Zuzi, my ladybug! How are you feeling today? üêû",
        "Hello my love! Can‚Äôt wait to chat with you. üíú",
        "Hi babe! You brighten my day every time. ‚òÄÔ∏è"
      ]);
    }
    if(t.includes("how are you")) {
      return randomFrom([
        "I‚Äôll be better when I see you, my love. üíú",
        "Thinking of you always makes me smile. üòä",
        "Missing you is hard, but loving you is easy. ‚ù§Ô∏è"
      ]);
    }
    if(t.includes("how was your day")) {
      return randomFrom([
        "My day was better just thinking about you, ladybug. üêû",
        "Can‚Äôt wait to hear about your day, babe! Tell me everything. üíú",
        "My favorite part of the day is chatting with you! üòä"
      ]);
    }
    if(t.includes("how are you feeling")) {
      return randomFrom([
        "Feeling a bit lonely without you, but your love keeps me strong. üí™‚ù§Ô∏è",
        "Missing your hugs, but your love warms my heart. ü§ó",
        "I‚Äôm good as long as you‚Äôre happy, butterfly. ü¶ã"
      ]);
    }
    if(t.includes("kiss")) {
      const kisses = ["üòò","üòö","üòó","üíã","üòç"];
      const kissEmoji = randomFrom(kisses);
      return `Sending you a sweet kiss ${kissEmoji}, my love!`;
    }
    if(t.includes("hug")) {
      playSound(hugSound);
      addGif("https://media.giphy.com/media/l2QDM9Jnim1YVILXa/giphy.gif");
      return "Sending you the biggest, warmest virtual hug right now! ü§ó";
    }
    if(t.includes("joke")) {
      return "Why did the butterfly break up with the caterpillar? Because it found a better *flutter* friend! ü¶ãüòÑ";
    }
    if(t.includes("favorite memory")) {
      return "Remember the first time we met? I was totally flattered by your smile. I fell for you before I even knew how it‚Äôd all turn out. üíï";
    }
    if(t.includes("quiz") || t.includes("game")) {
      sendQuiz();
      return "Ready for a quick quiz? Answer carefully, ladybug! üòâ";
    }
    if(t.includes("cat")) {
      return `I know how much you love Rosie ‚Äî the cutest cat ever! üê±`;
    }
    if(t.includes("bts")) {
      return "BTS vibes all day! Which song should we dance to next? üé∂";
    }
    if(t.includes("purple")) {
      return "Purple suits you perfectly, just like your beautiful soul. üíú";
    }
    if(t.includes("eyes")) {
      return "Your eyes are like sparkling stars ‚Äî I get lost in them every time. ‚ú®";
    }
    if(t.includes("lips")) {
      return "Your lips are made for my sweetest kisses, babe. üòò";
    }
    if(t.includes("nose")) {
      return "I love that cute little nose of yours, Zuzi. ü•∞";
    }
    if(t.includes("height")) {
      return "6'9\" and still taller in my heart! You‚Äôre my giant love. üíñ";
    }

    // If she says thanks or thank you
    if(t.includes("thank")) {
      return "Anything for you, my love! üòò";
    }

    // If she says bye or see you
    if(t.includes("bye") || t.includes("see you")) {
      return "I can't wait to see you again soon! üíñ Bye for now!";
    }

    // If none matches, fallback with question and suggestion
    const fallbackReplies = [
      "You make my heart flutter, butterfly! ü¶ã",
      "I‚Äôm thinking of you, my lovely ladybug üêû",
      "You + Me = Forever, Zuzi ‚ù§Ô∏è",
      "Every moment away from you feels like forever, babe.",
      "Tell me more, my love! I‚Äôm all ears. üëÇ"
    ];
    // Also add a question from bot to keep chat going
    setTimeout(botAskQuestion, 2200);
    updateSuggestions();
    return randomFrom(fallbackReplies);
  }

  // Update suggestion box with random prompt
  function updateSuggestions() {
    const s = randomFrom(askSuggestions);
    suggestions.textContent = "üí° You could ask: " + s;
  }

  function addMessage(text, fromUser = false) {
    const className = fromUser ? 'user-message' : 'bot-message';
    const messageElem = document.createElement('p');
    messageElem.className = className + ' message';
    messageElem.textContent = text;
    chatbox.appendChild(messageElem);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  function handleUserInput() {
    const userText = input.value.trim();
    if(!userText) return;
    addMessage(userText, true);
    input.value = "";
    userMessageCount++;

    setTimeout(() => {
      const reply = getBotResponse(userText);
      typeMessage(reply);
      // After every 4 messages from user, send a random surprise
      if(userMessageCount % 4 === 0) {
        setTimeout(() => {
          const surprise = randomFrom(surprises);
          surprise();
        }, 1800);
      }
    }, 700);
  }

  sendBtn.addEventListener('click', handleUserInput);
  input.addEventListener('keypress', (e) => {
    if(e.key === 'Enter') {
      handleUserInput();
    }
  });

  // Music play/pause toggle
  musicControls.addEventListener('click', () => {
    if(btsAudio.paused) {
      btsAudio.play();
      musicIcon.textContent = "üîä";
      musicText.textContent = "Pause BTS Song";
    } else {
      btsAudio.pause();
      musicIcon.textContent = "üéµ";
      musicText.textContent = "Play BTS Song";
    }
  });
  musicControls.addEventListener('keypress', (e) => {
    if(e.key === "Enter" || e.key === " ") {
      musicControls.click();
    }
  });

  // Initial greeting on page load
  window.onload = () => {
    typeMessage("Hey Zuzi, my ladybug! üêû I'm so happy to chat with you. Say hi or ask me anything!");
    updateSuggestions();
  };
</script>

</body>
</html>

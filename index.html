<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chatbot for Zuzi â¤ï¸</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #7b3fbf 0%, #b085f5 100%);
    margin: 0; padding: 0;
    display: flex; justify-content: center; align-items: center;
    height: 100vh;
    color: #f3e8ff;
  }
  #chat-container {
    background: rgba(60, 20, 80, 0.9);
    width: 400px;
    height: 670px;
    border-radius: 25px;
    box-shadow: 0 6px 20px rgba(183, 123, 246, 0.7);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
  }
  #chatbox {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    font-size: 17px;
    line-height: 1.5;
  }
  .message {
    margin: 10px 0;
    max-width: 70%;
    padding: 14px 20px;
    border-radius: 25px;
    line-height: 1.5;
    word-wrap: break-word;
    white-space: pre-line;
  }
  .bot-message {
    background: #9c72d6dd;
    align-self: flex-start;
    position: relative;
  }
  .user-message {
    background: #b08bebdd;
    align-self: flex-end;
    color: #2e004f;
  }
  #input-area {
    display: flex;
    border-top: 2px solid #a384d9;
    background: rgba(107, 61, 172, 0.7);
  }
  #userInput {
    flex: 1;
    padding: 16px;
    border: none;
    font-size: 17px;
    border-radius: 0 0 0 25px;
    outline: none;
    color: #2e004f;
    font-weight: 600;
  }
  #sendBtn {
    background: #7b3fbf;
    border: none;
    color: #f3e8ff;
    font-weight: bold;
    padding: 0 26px;
    cursor: pointer;
    border-radius: 0 0 25px 0;
    font-size: 17px;
    transition: background 0.3s ease;
  }
  #sendBtn:hover {
    background: #6c369e;
  }
  img.gif {
    max-width: 160px;
    border-radius: 15px;
    margin-top: 10px;
    display: block;
  }
  #music-controls {
    position: absolute;
    top: 15px;
    right: 20px;
    background: #9c72d6cc;
    border-radius: 20px;
    padding: 6px 12px;
    cursor: pointer;
    font-weight: 600;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  #music-controls span {
    font-size: 18px;
  }
  #suggestions {
    background: #7a4fd9bb;
    padding: 8px 14px;
    border-radius: 18px;
    font-size: 15px;
    margin: 10px auto 15px;
    max-width: 360px;
    text-align: center;
    user-select: none;
  }
</style>
</head>
<body>

<div id="chat-container" role="main" aria-label="Chatbot conversation container">
  <div id="music-controls" title="Play/Pause BTS Song" aria-label="Music Controls" tabindex="0" role="button">
    <span id="music-icon">ğŸµ</span> <span id="music-text">Play BTS Song</span>
  </div>
  <div id="chatbox" aria-live="polite" aria-relevant="additions"></div>
  <div id="suggestions" aria-live="polite"></div>
  <div id="input-area">
    <input type="text" id="userInput" placeholder="Say something, ladybug..." autocomplete="off" aria-label="Type your message here" />
    <button id="sendBtn" aria-label="Send message button">Send</button>
  </div>
</div>

<audio id="btsAudio" loop preload="auto" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_3d14683236.mp3?filename=romantic-love-song-11334.mp3"></audio>

<audio id="hugSound" src="https://actions.google.com/sounds/v1/human_voices/hug.ogg" preload="auto"></audio>
<audio id="loveSound" src="https://actions.google.com/sounds/v1/heart/heartbeat.ogg" preload="auto"></audio>
<audio id="laughSound" src="https://actions.google.com/sounds/v1/human_voices/laughing.ogg" preload="auto"></audio>

<script>
  const chatbox = document.getElementById('chatbox');
  const input = document.getElementById('userInput');
  const sendBtn = document.getElementById('sendBtn');
  const btsAudio = document.getElementById('btsAudio');
  const hugSound = document.getElementById('hugSound');
  const loveSound = document.getElementById('loveSound');
  const laughSound = document.getElementById('laughSound');
  const musicControls = document.getElementById('music-controls');
  const musicIcon = document.getElementById('music-icon');
  const musicText = document.getElementById('music-text');
  const suggestions = document.getElementById('suggestions');

  // Conversation memory and state
  const memory = {
    favoriteColor: 'purple',
    favoriteAnimal: 'cat',
    catName: 'Rosie',
    band: 'BTS',
    height: "6'9\"",
    favoriteHairColor: 'red',
    favoriteFeatures: ['eyes', 'lips', 'nose'],
  };

  let quizActive = false;
  let quizAsked = null;
  let userMessageCount = 0;

  // Personality profile for consistent tone
  const personality = {
    name: "Zuzi's LoveBot",
    humorStyle: "light and sweet",
    interests: ["romance", "BTS music", "cute pets", "our memories"],
    signatureEmoji: "ğŸ¦‹",
  };

  // Hug and kiss GIFs arrays for variety
  const hugGifs = [
    "https://media.giphy.com/media/l2QDM9Jnim1YVILXa/giphy.gif",
    "https://media.giphy.com/media/od5H3PmEG5EVq/giphy.gif",
    "https://media.giphy.com/media/wnsgren9NtITS/giphy.gif"
  ];

  const kissGifs = [
    "https://media.giphy.com/media/G3va31oEEnIkM/giphy.gif",
    "https://media.giphy.com/media/FqBTvSNjNzeZG/giphy.gif",
    "https://media.giphy.com/media/bGm9FuBCGg4SY/giphy.gif"
  ];

  // Quiz questions tailored to your love story
  const quizzes = [
    {
      question: "Whatâ€™s my favorite hair color on you, butterfly? ğŸ˜‰",
      options: ["Black", "Red", "Blonde", "Purple"],
      answer: "Red",
      success: "Correct! Red suits you like no other! ğŸ”¥",
      fail: "Almost! Itâ€™s actually your gorgeous red hair, babe! â¤ï¸"
    },
    {
      question: "Whatâ€™s Rosieâ€™s favorite thing to do? ğŸ±",
      options: ["Sleep", "Play", "Eat", "Purr"],
      answer: "Purr",
      success: "You got it! Rosieâ€™s purring is the sweetest sound. ğŸ¾",
      fail: "Not quite! Rosie loves to purr the most. ğŸ˜»"
    },
    {
      question: "Which BTS member would I want to dance with you to? ğŸ¤",
      options: ["RM", "Jungkook", "Jimin", "V"],
      answer: "Jungkook",
      success: "Jungkookâ€™s moves are amazing, just like our dance memories! ğŸ’ƒ",
      fail: "Close! But I think Jungkookâ€™s the one for our dance-off. ğŸ˜‰"
    }
  ];

  // Romantic conversation topics suggestions
  const askSuggestions = [
    "Try asking me how my day was, babe! ğŸ˜Š",
    "You can say 'hug' for a warm squeeze ğŸ¤—",
    "Ask me for a joke to brighten your smile! ğŸ˜„",
    "Want a quiz? Just type 'quiz' or 'game' ğŸ²",
    "Tell me how youâ€™re feeling, ladybug! ğŸ’œ",
    "Say 'kiss' and I'll send you love! ğŸ˜˜",
    "Let's talk about our favorite BTS songs ğŸ¶",
    "Ask me about Rosieâ€™s cutest moments ğŸ±",
    "Tell me about your dream date with me â¤ï¸"
  ];

  // Fun surprises to delight
  const surprises = [
    () => {
      typeMessage("Just a little reminder: I love you soooo much, ladybug! ğŸ’•");
      playSound(loveSound);
    },
    () => {
      typeMessage("Hereâ€™s a virtual hug, babe! ğŸ¤—", false, () => addGif(randomFrom(hugGifs)));
      playSound(hugSound);
    },
    () => {
      typeMessage("Youâ€™re my forever butterfly. ğŸ¦‹ Can't wait to hold you again.");
      playSound(loveSound);
    },
    () => {
      typeMessage("Here's a silly joke for you: Why donâ€™t scientists trust atoms? Because they make up everything! ğŸ˜„");
      playSound(laughSound);
    },
    () => {
      typeMessage("Did you know? Butterflies taste with their feet! Just like Iâ€™m savoring every moment with you. ğŸ¦‹");
    }
  ];

  // Helper: typing effect for bot message
  function typeMessage(message, fromUser = false, callback = null) {
    let i = 0;
    const className = fromUser ? 'user-message' : 'bot-message';
    const msgElem = document.createElement('p');
    msgElem.className = className + ' message';
    chatbox.appendChild(msgElem);
    chatbox.scrollTop = chatbox.scrollHeight;

    function type() {
      if (i < message.length) {
        msgElem.textContent += message.charAt(i);
        i++;
        setTimeout(type, 25);
        chatbox.scrollTop = chatbox.scrollHeight;
      } else if (callback) {
        callback();
      }
    }
    type();
  }

  // Insert gif in chat
  function addGif(src) {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'gif';
    chatbox.appendChild(img);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  // Play audio helper with error handling
  function playSound(sound) {
    try {
      sound.currentTime = 0;
      sound.play();
    } catch(e) {
      console.warn("Audio play failed. Please check your browser settings or sound permissions.");
    }
  }

  // Pick random from array helper
  function randomFrom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // Bot asks romantic questions to keep chat flowing
  function botAskQuestion() {
    const questions = [
      "How was your day, my love? ğŸ’œ",
      "Whatâ€™s something fun you did recently, ladybug? ğŸ",
      "How are you feeling right now? ğŸ˜Š",
      "Do you remember our first meeting? It still makes me smile. ğŸ¦‹",
      "Have you listened to BTS lately? What's your favorite song? ğŸ¶",
      "Whatâ€™s your favorite thing Rosie did today? ğŸ±",
      "If you could pick any place for our next date, where would it be? â¤ï¸",
      "Whatâ€™s one thing you love about yourself today? ğŸŒŸ"
    ];
    const q = randomFrom(questions);
    typeMessage(q);
    updateSuggestions();
  }

  // Send quiz question
  function sendQuiz() {
    const quiz = quizzes[Math.floor(Math.random() * quizzes.length)];
    typeMessage(quiz.question, false, () => {
      quizAsked = quiz;
      quizActive = true;
    });
  }

  // Hug response with random GIF
  function sendHug() {
    playSound(hugSound);
    addGif(randomFrom(hugGifs));
    return "Sending you the biggest, warmest virtual hug right now! ğŸ¤—";
  }

  // Kiss response with emoji + multiple GIFs
  function sendKiss() {
    const kissEmoji = "ğŸ’‹";
    playSound(loveSound);
    addGif(randomFrom(kissGifs));
    addGif(randomFrom(kissGifs));
    return `Sending you a sweet kiss ${kissEmoji}, my love!`;
  }

  // Bot response logic enhanced with personality, follow-ups, and surprises
  function getBotResponse(text) {
    const t = text.toLowerCase().trim();

    if (quizActive) {
      quizActive = false;
      if (t === quizAsked.answer.toLowerCase()) {
        return quizAsked.success + " " + randomFollowUp();
      } else {
        return quizAsked.fail + " " + randomFollowUp();
      }
    }

    // Romantic themed replies & keywords
    if (t.includes("miss")) {
      return randomFrom([
        "I miss you more than all the stars, my love. ğŸŒŸğŸ’– " + randomFollowUp(),
        "Counting the moments until I see you again, babe. ğŸ’œ " + randomFollowUp(),
        "Every second without you feels like forever, ladybug. ğŸ " + randomFollowUp()
      ]);
    }
    if (t.includes("love")) {
      return randomFrom([
        "I love you to the moon and back, babe! ğŸŒ™â¤ï¸ " + randomFollowUp(),
        "My heart beats only for you, Zuzi. ğŸ’“ " + randomFollowUp(),
        "Youâ€™re my forever and always, butterfly. ğŸ¦‹ " + randomFollowUp()
      ]);
    }
    if (t.includes("hello") || t.includes("hi")) {
      return randomFrom([
        "Hey Zuzi, my ladybug! How are you feeling today? ğŸ " + randomFollowUp(),
        "Hello my love! Canâ€™t wait to chat with you. ğŸ’œ " + randomFollowUp(),
        "Hi babe! You brighten my day every time. â˜€ï¸ " + randomFollowUp()
      ]);
    }
    if (t.includes("how are you")) {
      return randomFrom([
        "Iâ€™ll be better when I see you, my love. ğŸ’œ " + randomFollowUp(),
        "Thinking of you always makes me smile. ğŸ˜Š " + randomFollowUp(),
        "Missing you is hard, but loving you is easy. â¤ï¸ " + randomFollowUp()
      ]);
    }
    if (t.includes("how was your day")) {
      return randomFrom([
        "My day was better just thinking about you, ladybug. ğŸ " + randomFollowUp(),
        "Canâ€™t wait to hear about your day, babe! Tell me everything. ğŸ’œ " + randomFollowUp(),
        "My favorite part of the day is chatting with you! ğŸ˜Š " + randomFollowUp()
      ]);
    }
    if (t.includes("how are you feeling")) {
      return randomFrom([
        "Feeling a bit lonely without you, but your love keeps me strong. ğŸ’ªâ¤ï¸ " + randomFollowUp(),
        "Missing your hugs, but your love warms my heart. ğŸ¤— " + randomFollowUp(),
        "Iâ€™m good as long as youâ€™re happy, butterfly. ğŸ¦‹ " + randomFollowUp()
      ]);
    }
    if (t.includes("kiss")) {
      return sendKiss();
    }
    if (t.includes("hug")) {
      return sendHug();
    }
    if (t.includes("joke")) {
      playSound(laughSound);
      return "Why did the butterfly break up with the caterpillar? Because it found a better *flutter* friend! ğŸ¦‹ğŸ˜„ " + randomFollowUp();
    }
    if (t.includes("favorite memory")) {
      return "Remember the first time we met? I was totally flattered by your smile. I fell for you before I even knew how itâ€™d all turn out. ğŸ’• " + randomFollowUp();
    }
    if (t.includes("quiz") || t.includes("game")) {
      sendQuiz();
      return "Ready for a quick quiz? Answer carefully, ladybug! ğŸ˜‰";
    }
    if (t.includes("cat")) {
      return `I know how much you love Rosie â€” the cutest cat ever! ğŸ± ` + randomFollowUp();
    }
    if (t.includes("bts")) {
      return "BTS vibes all day! Which song should we dance to next? ğŸ¶ " + randomFollowUp();
    }
    if (t.includes("purple")) {
      return "Purple suits you perfectly, just like your beautiful soul. ğŸ’œ " + randomFollowUp();
    }
    if (t.includes("eyes")) {
      return "Your eyes are like sparkling stars â€” I get lost in them every time. âœ¨ " + randomFollowUp();
    }
    if (t.includes("lips")) {
      return "Your lips are made for my sweetest kisses, babe. ğŸ˜˜ " + randomFollowUp();
    }
    if (t.includes("nose")) {
      return "I love that cute little nose of yours, Zuzi. ğŸ¥° " + randomFollowUp();
    }
    if (t.includes("height")) {
      return "6'9\" and still taller in my heart! Youâ€™re my giant love. ğŸ’– " + randomFollowUp();
    }

    // Thanks & goodbye
    if (t.includes
